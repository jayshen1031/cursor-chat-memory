<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cursor Chat Memory æ™ºèƒ½èŠå¤©è®°å¿†ç®¡ç†ä¸­å¿ƒ">
    <meta name="theme-color" content="#4299e1">
    
    <!-- æ€§èƒ½ä¼˜åŒ– - é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    <link rel="dns-prefetch" href="//localhost">
    
    <!-- å…³é”®CSSå†…è”ä»¥å‡å°‘æ¸²æŸ“é˜»å¡ -->
    <style>
        /* å…³é”®è·¯å¾„CSS - é¿å…FOUC */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .app { min-height: 100vh; display: flex; flex-direction: column; }
        .loading { 
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0; 
            background: rgba(255,255,255,0.9); 
            display: none; z-index: 9999; 
        }
        .loading.show { display: flex; align-items: center; justify-content: center; }
    </style>
    
    <title>ğŸ§  Cursor Chat Memory - ç®¡ç†ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <!-- å¤´éƒ¨å¯¼èˆª -->
        <header class="header">
            <div class="header-content">
                <h1>ğŸ§  Cursor Chat Memory ç®¡ç†ä¸­å¿ƒ</h1>
                <div class="header-actions">
                    <button id="refreshBtn" class="btn btn-secondary">ğŸ”„ åˆ·æ–°</button>
                    <div class="project-info">
                        <span id="projectPath">é¡¹ç›®: cursor-chat-memory</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ä¸»å¯¼èˆªæ ‡ç­¾ -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="sessions">ğŸ“‹ å†å²ä¼šè¯</button>
            <button class="tab-btn" data-tab="prompts">ğŸ§  æç¤ºè¯ä¸­å¿ƒ</button>
            <button class="tab-btn" data-tab="reference">âš¡ å¼•ç”¨ç”Ÿæˆ</button>
            <button class="tab-btn" data-tab="analytics">ğŸ“Š ç»Ÿè®¡åˆ†æ</button>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- å†å²ä¼šè¯ç®¡ç† -->
            <div id="sessions-tab" class="tab-content active">
                <div class="tab-header">
                    <h2>ğŸ“‹ å†å²ä¼šè¯ç®¡ç†</h2>
                    <div class="toolbar">
                        <input type="text" id="sessionSearch" placeholder="æœç´¢ä¼šè¯..." class="search-input">
                        <select id="categoryFilter" class="filter-select">
                            <option value="">æ‰€æœ‰åˆ†ç±»</option>
                            <option value="JavaScript">JavaScript</option>
                            <option value="Python">Python</option>
                            <option value="æ•°æ®åº“">æ•°æ®åº“</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                        <button id="searchSessionsBtn" class="btn btn-primary">ğŸ” æœç´¢</button>
                    </div>
                </div>
                
                <div class="content-grid">
                    <div class="sessions-list">
                        <div id="sessionsContainer" class="sessions-container">
                            <!-- ä¼šè¯åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="session-detail">
                        <div id="sessionDetailContainer" class="detail-container">
                            <div class="empty-state">
                                <p>é€‰æ‹©ä¸€ä¸ªä¼šè¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æç¤ºè¯ä¸­å¿ƒç®¡ç† -->
            <div id="prompts-tab" class="tab-content">
                <div class="tab-header">
                    <h2>ğŸ§  æç¤ºè¯ä¸­å¿ƒ</h2>
                    <div class="toolbar">
                        <input type="text" id="promptSearch" placeholder="æœç´¢æç¤ºè¯..." class="search-input">
                        <select id="typeFilter" class="filter-select">
                            <option value="">æ‰€æœ‰ç±»å‹</option>
                            <option value="global">å…¨å±€çŸ¥è¯†</option>
                            <option value="project">é¡¹ç›®ç»éªŒ</option>
                            <option value="iteration">è¿­ä»£è®°å½•</option>
                        </select>
                        <button id="searchPromptsBtn" class="btn btn-primary">ğŸ” æœç´¢</button>
                        <button id="createPromptBtn" class="btn btn-success">â• åˆ›å»ºæç¤ºè¯</button>
                    </div>
                </div>
                
                <div class="content-grid">
                    <div class="prompts-list">
                        <div id="promptsContainer" class="prompts-container">
                            <!-- æç¤ºè¯åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="prompt-detail">
                        <div id="promptDetailContainer" class="detail-container">
                            <div class="empty-state">
                                <p>é€‰æ‹©ä¸€ä¸ªæç¤ºè¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¼•ç”¨ç”Ÿæˆ -->
            <div id="reference-tab" class="tab-content">
                <div class="tab-header">
                    <h2>âš¡ æ™ºèƒ½å¼•ç”¨ç”Ÿæˆ</h2>
                </div>
                
                <div class="reference-generator">
                    <div class="input-section">
                        <h3>è¾“å…¥æ‚¨çš„é—®é¢˜æˆ–ä¸Šä¸‹æ–‡</h3>
                        <textarea id="contextInput" placeholder="ä¾‹å¦‚: å¦‚ä½•ä¼˜åŒ–Reactæ€§èƒ½ã€æ•°æ®åº“æŸ¥è¯¢é—®é¢˜..." rows="4"></textarea>
                        
                        <div class="reference-options">
                            <div class="option-group">
                                <h4>å¼•ç”¨æ¨¡æ¿</h4>
                                <select id="templateSelect" class="template-select">
                                    <option value="recent">æœ€è¿‘ä¼šè¯</option>
                                    <option value="current-topic">å½“å‰ä¸»é¢˜</option>
                                    <option value="problem-solving">é—®é¢˜è§£å†³</option>
                                    <option value="optimization">æ€§èƒ½ä¼˜åŒ–</option>
                                    <option value="all-important">é‡è¦ç²¾é€‰</option>
                                </select>
                            </div>
                            
                            <div class="option-group">
                                <label>
                                    <input type="checkbox" id="includePrompts" checked>
                                    åŒ…å«æ¨èæç¤ºè¯
                                </label>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button id="generateReferenceBtn" class="btn btn-primary">ğŸš€ ç”Ÿæˆå¼•ç”¨</button>
                            <button id="getRecommendationsBtn" class="btn btn-secondary">ğŸ’¡ è·å–æ¨è</button>
                        </div>
                    </div>
                    
                    <div class="output-section">
                        <h3>ç”Ÿæˆçš„å¼•ç”¨å†…å®¹</h3>
                        <div id="referenceOutput" class="reference-output">
                            <!-- å¼•ç”¨å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                        <div class="output-actions">
                            <button id="copyReferenceBtn" class="btn btn-success" style="display: none;">ğŸ“‹ å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç»Ÿè®¡åˆ†æ -->
            <div id="analytics-tab" class="tab-content">
                <div class="tab-header">
                    <h2>ğŸ“Š ç»Ÿè®¡åˆ†æ</h2>
                </div>
                
                <div class="analytics-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>ä¼šè¯ç»Ÿè®¡</h3>
                            <div id="sessionStats" class="stat-content">
                                <!-- ä¼šè¯ç»Ÿè®¡ä¿¡æ¯ -->
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h3>æç¤ºè¯ç»Ÿè®¡</h3>
                            <div id="promptStats" class="stat-content">
                                <!-- æç¤ºè¯ç»Ÿè®¡ä¿¡æ¯ -->
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h3>åˆ†ç±»åˆ†å¸ƒ</h3>
                            <div id="categoryStats" class="stat-content">
                                <!-- åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">æ ‡é¢˜</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- æ¨¡æ€æ¡†å†…å®¹ -->
            </div>
            <div class="modal-footer">
                <button id="modalCancel" class="btn btn-secondary">å–æ¶ˆ</button>
                <button id="modalConfirm" class="btn btn-primary">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div id="loading" class="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>

    <!-- é€šçŸ¥å®¹å™¨ -->
    <div id="notifications" class="notifications">
        <!-- é€šçŸ¥æ¶ˆæ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
    </div>

    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div id="loading" class="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>

    <!-- é€šçŸ¥å®¹å™¨ -->
    <div id="notifications" class="notifications"></div>

    <!-- å¼‚æ­¥åŠ è½½éå…³é”®JS -->
    <script defer src="script.js"></script>
    
    <!-- åˆå§‹åŒ–è„šæœ¬ -->
    <script>
        // æ€§èƒ½ç›‘æ§
        window.addEventListener('load', () => {
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                console.log('é¡µé¢åŠ è½½æ—¶é—´ï¼š', perfData.loadEventEnd - perfData.fetchStart, 'ms');
            }
        });

        // å¯ç”¨æ‡’åŠ è½½
        document.addEventListener('DOMContentLoaded', () => {
            if ('IntersectionObserver' in window) {
                PerformanceUtils?.lazyLoadImages();
            }
        });

        // ç¦»çº¿æ£€æµ‹
        window.addEventListener('online', () => {
            console.log('ç½‘ç»œè¿æ¥å·²æ¢å¤');
        });
        
        window.addEventListener('offline', () => {
            console.log('ç½‘ç»œè¿æ¥å·²æ–­å¼€');
        });
    </script>
</body>
</html> 