# 项目上下文

> 自动分析项目的核心功能和技术架构

## 2025-06-13 项目活动摘要

### 核心项目：Cursor Memory MCP Server
- **项目类型**: 开发工具集成项目
- **主要功能**: 集成Cursor编辑器的聊天记忆功能，提供AI驱动的智能分析
- **技术栈**: Node.js, SQLite, MCP (Model Context Protocol)

### 今日主要活动

#### 1. BI项目部署与配置
- **目标路径**: `/Users/jay/Documents/baidu/projects/BI/`
- **部署脚本**: `deploy-to-new-project.sh`
- **项目类型**: BI (Business Intelligence)
- **关键问题**: 初始部署时误删了原有BI文件，后续修改脚本避免清理现有文件

#### 2. 脚本优化
- **修改内容**: 更新 `deploy-to-new-project.sh` 脚本
- **优化目标**: 防止 `--clean` 参数删除目标目录中的现有文件
- **解决方案**: 注释掉清理逻辑，保留原有文件结构

#### 3. MCP Server 集成
- **服务端口**: 3000
- **配置文件**: `cursor-mcp-config.json`
- **Memory Bank路径**: `./memory-bank`
- **支持的项目类型**: development, analysis, bi

#### 4. 数据同步功能
- **聊天数据提取**: 从Cursor SQLite数据库提取对话历史
- **数据处理**: 今日提取53个有效对话对
- **Memory Bank更新**: 自动分析并更新项目上下文



### 技术架构特点
1. **模块化设计**: 支持多项目类型的Memory Bank结构
2. **自动化同步**: 定时从Cursor数据库同步聊天数据
3. **智能分析**: AI驱动的对话模式识别和项目上下文提取
4. **灵活部署**: 支持不同项目类型的定制化部署

### 当前挑战
1. **进程管理**: Memory Bank进程检测和管理需要优化
2. **数据完整性**: 确保部署过程中不丢失现有项目文件
3. **跨项目集成**: 在BI项目中正确配置和使用MCP Server

### 下一步计划
1. 完善BI项目的MCP Server集成
2. 优化Memory Bank的进程监控机制
3. 增强项目上下文的自动分析能力

---
*最后更新: 2025-06-13 20:21*

## 项目概述

**Cursor Memory MCP Server** - 智能聊天历史分析和Memory Bank管理系统

一个专注于从Cursor编辑器中提取、分析和管理聊天历史的智能工具，通过MCP协议与Cursor无缝集成，提供结构化的知识管理和学习洞察。

## 核心功能

### 🔍 数据提取与分析
- 自动从Cursor SQLite数据库提取聊天数据
- 智能问答配对和时间戳修复
- AI驱动的内容分析和分类
- 支持多工作区数据库自动识别

### 📚 Memory Bank管理
- 结构化的知识存储系统（Markdown格式）
- 自动分类：技术洞察、问题解决方案、代码模式、技术决策
- 智能内容更新和版本管理
- 46.8KB专业技术文档库（22个洞察+18个解决方案+17个模式）

### 🤖 MCP协议集成
- 标准MCP Server实现，与Cursor原生集成
- 提供5个核心工具：数据同步、记忆库管理、对话分析、摘要生成
- 支持多重配置策略（UI配置、配置文件、环境变量）

### 📄 文档生成
- 自动生成Markdown格式的聊天历史
- 智能摘要和统计分析
- 支持时间范围过滤和内容分类
- 质量评估和优化建议

## 技术架构

### 🏗️ 核心架构
- **后端**: Node.js + ES Modules
- **数据库**: SQLite (Cursor原生数据库)
- **存储**: Markdown文件系统 + JSON数据缓存
- **协议**: Model Context Protocol (MCP) v1.0
- **配置**: 多层配置管理（项目级→环境变量→全局→默认）

### 📁 项目结构
```
cursor-chat-memory/
├── src/mcp-server.js          # MCP服务器核心
├── extract-chat-data.js       # 数据提取引擎
├── fix-missing-ai-responses.js # AI回复智能生成
├── generate-markdown.js       # 文档生成器
├── generate-summary.js        # 摘要生成器
├── memory-bank/               # 知识库目录
│   ├── learningInsights.md    # 技术洞察 (17KB)
│   ├── problemSolutions.md    # 问题解决方案 (10KB)
│   ├── codePatterns.md        # 代码模式 (9.8KB)
│   └── ...                    # 其他知识文件
└── .cursor/mcp.json          # MCP配置文件
```

### 🔄 数据流程
1. **提取** → 从Cursor SQLite读取原始数据
2. **修复** → 智能生成缺失的AI回复内容
3. **分析** → 内容分类和质量评估
4. **存储** → 更新Memory Bank和生成文档
5. **集成** → 通过MCP协议提供给Cursor

## 项目演进历程

### 🎯 V1.0 - 基础数据提取 (2025-06-11)
- ✅ 实现SQLite数据库读取
- ✅ 问答配对算法 (79%成功率)
- ✅ 时间戳智能修复
- ✅ 95组历史对话处理

### 🚀 V2.0 - 智能分析与Web界面 (2025-06-11)
- ✅ AI驱动的内容分类
- ✅ Web可视化界面
- ✅ 性能优化和缓存机制
- ✅ 完整的Memory Bank结构

### 🎨 V2.1 - 项目精简与MCP集成 (2025-06-12)
- ✅ 移除Web功能，专注核心价值
- ✅ MCP Server完整实现
- ✅ 多重配置策略
- ✅ 数据导出质量优化
- ✅ 记忆库自动更新机制

## 使用场景

### 👨‍💻 **开发者**
- 回顾技术讨论和解决方案
- 学习代码模式和最佳实践
- 问题排查和调试参考

### 🎓 **学习者**
- 技术洞察和深度思考
- 项目管理经验总结
- 持续学习和知识积累

### 🏢 **团队**
- 知识共享和传承
- 技术决策记录
- 项目经验复用

## 技术特色

### 🧠 **智能化**
- 基于200+问题模式的AI回复生成
- 语义分析和内容分类
- 质量评估和优化建议

### 🔧 **工程化**
- 完整的错误处理和日志记录
- 多平台兼容性 (macOS/Windows/Linux)
- 渐进式配置和故障恢复

### 📈 **可扩展性**
- 插件化的分析器架构
- 模块化的Memory Bank结构
- 标准化的MCP协议接口

## 配置要求

### 🖥️ **系统要求**
- Node.js 16+ (支持ES Modules)
- Cursor编辑器 (任意版本)
- 操作系统: macOS/Windows/Linux

### ⚙️ **配置步骤**
1. 克隆项目并安装依赖: `npm install`
2. 启动MCP服务器: `npm run mcp`
3. 配置Cursor MCP集成 (如支持)
4. 运行数据导出: `npm run export`

### 🔑 **环境变量** (可选)
```bash
CURSOR_WORKSPACE_ID=your-workspace-id  # 指定工作区ID
MCP_CONFIG_PATH=/path/to/config.json   # 自定义配置路径
DEBUG=cursor-memory:*                  # 启用调试日志
```

## 项目价值

### 💡 **核心价值**
- **知识保存**: 防止宝贵的技术讨论丢失
- **学习加速**: 结构化的经验和洞察积累
- **效率提升**: 快速查找历史解决方案
- **团队协作**: 知识共享和传承机制

### 📊 **量化成果**
- 处理了116组历史对话 (6/11: 95组 + 6/12: 21组)
- 生成了46.8KB的结构化知识库
- 实现了79%的问答配对成功率
- 建立了22个技术洞察和18个解决方案

*此文件由MCP Server自动维护 - 最后更新: 2025-06-12*
