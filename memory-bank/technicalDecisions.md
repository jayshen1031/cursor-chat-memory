# 技术决策

> 记录重要的技术选择和架构决策

## MCP协议选择

- 选择MCP标准协议，确保与Cursor生态的兼容性
- 使用stdio传输，简化部署和调试

## 数据存储方案

- 直接读取Cursor SQLite数据库，避免数据重复
- 使用Markdown文件存储Memory Bank，便于人工查看和版本控制

*此文件由MCP Server自动维护*

## 🆕 2025-06-12 技术决策

### 决策1: 移除Web展示功能
**背景**: 用户反馈Web功能不是核心需求，希望简化项目结构
**决策**: 完全移除Web相关功能，专注于MCP和数据导出
**影响**: 
- ✅ 项目结构更简洁，维护成本降低
- ✅ 减少依赖，提高稳定性
- ❌ 失去可视化界面，但可通过Markdown文件补偿

**实施方案**:
```bash
# 删除的文件
- serve.js (Web服务器)
- cursor-chat-viewer.html (前端页面)  
- web-chat-data.json (Web数据)
- web/ 目录及其内容

# 修改的文件
- package.json (移除web相关脚本)
- extract-chat-data.js (移除Web数据生成)
- README.md (更新使用说明)
```

### 决策2: 数据导出质量优化策略
**问题**: 6/12导出质量不如6/11，AI回复内容过于模板化
**分析**: 
- 数据量影响：6/11有95组对话 vs 6/12只有21组
- 内容深度：历史积累的技术讨论更丰富
- 生成策略：需要更智能的AI回复生成算法

**决策**: 保持现有的fix-missing-ai-responses.js机制，但增强智能化
**改进方向**:
```javascript
// 当前：基于关键词的模板匹配
// 未来：基于语义理解的个性化回复生成
const generateIntelligentResponse = (prompt, context) => {
    // 分析提问类型、技术领域、复杂度
    // 生成更有针对性的回复
};
```

### 决策3: MCP配置问题的应对策略
**问题**: Cursor设置中找不到MCP配置选项
**可能原因**:
1. Cursor版本不支持MCP
2. MCP功能需要特殊启用
3. 配置方式与预期不同

**决策**: 采用多重配置策略
```json
// 方案1: 直接配置文件 (.cursor/mcp.json)
{
  "mcpServers": {
    "cursor-memory": {
      "command": "node",
      "args": ["src/mcp-server.js"],
      "cwd": "/path/to/cursor-chat-memory"
    }
  }
}

// 方案2: 环境变量配置
// 方案3: 命令行参数配置
```

## 2025-06-12 技术讨论

发现 8 个技术相关对话

- **问题**: 帮我快速开始的设置
  **方案**: 提供了MCP Server的快速启动指南和配置步骤

- **问题**: 在Cursor设置中导入配置文件cursor-mcp-config.json 这一步呢，不用了么
  **方案**: 分析了MCP配置的不同方式，确认配置文件的必要性

- **问题**: 2. 搜索 MCP 相关设置...这里搜索不到
  **方案**: 识别了Cursor MCP支持的版本兼容性问题

- **问题**: 帮我去掉网页展示历史数据的功能
  **方案**: 制定了Web功能移除的完整方案和文件清理策略

- **问题**: 导出的质量在哪里控制的，没有11号的好，很多核心信息没有提取
  **方案**: 分析了数据导出质量的影响因素和改进方向

- **问题**: MCP server要如何使用
  **方案**: 提供了MCP Server的使用指南和集成方法

- **问题**: 配置 MCP Server...显示no settings found
  **方案**: 深入分析了MCP配置问题的根本原因和解决思路

- **问题**: 获取记忆库内容 / 帮我更新记忆库
  **方案**: 实现了记忆库的动态管理和更新机制

