# ğŸ‰ Cursor èŠå¤©é—®ç­”å…³è”è§£å†³æ–¹æ¡ˆ

## ğŸ“Š æ ¸å¿ƒå‘ç°

æˆ‘ä»¬æˆåŠŸè§£å†³äº† **"ç”¨æˆ·æç¤ºè¯å’ŒAIå›å¤æ˜¯åˆ†å¼€çš„ï¼Œå¦‚ä½•çŸ¥é“å“ªä¸ªé—®å¯¹åº”å“ªä¸ªç­”"** çš„é—®é¢˜ï¼

### ğŸ” å…³é”®çªç ´

1. **æ•°æ®ç»“æ„åˆ†æ**ï¼šå‘ç°äº†CursorèŠå¤©æ•°æ®çš„å­˜å‚¨æœºåˆ¶
2. **æ—¶é—´æˆ³å…³è”**ï¼šæ‰¾åˆ°äº†åŸºäºæ—¶é—´çš„é…å¯¹æ–¹æ³•
3. **æ•°ç»„ç´¢å¼•å¯¹åº”**ï¼šç¡®è®¤äº†é—®ç­”çš„ä¸€ä¸€å¯¹åº”å…³ç³»

## ğŸ“ æ•°æ®ä½ç½®

**ä¸»è¦èŠå¤©æ•°æ®åº“**ï¼š
```
~/Library/Application Support/Cursor/User/workspaceStorage/{workspace-id}/state.vscdb
```

**æ ¸å¿ƒæ•°æ®è¡¨**ï¼š
- `ItemTable` - åŒ…å«é”®å€¼å¯¹å­˜å‚¨
- å…³é”®å­—æ®µï¼š`aiService.prompts` å’Œ `aiService.generations`

## ğŸ§© æ•°æ®ç»“æ„

### ç”¨æˆ·æç¤ºè¯ (`aiService.prompts`)
```json
[
  {
    "text": "ç”¨æˆ·çš„é—®é¢˜å†…å®¹",
    "commandType": 4
  }
]
```

### AIç”Ÿæˆå†…å®¹ (`aiService.generations`)
```json
[
  {
    "unixMs": 1749483959803,
    "generationUUID": "767927ad-e403-4120-b639-e7db42967d29",
    "type": "composer",
    "textDescription": "AIçš„å›å¤å†…å®¹"
  }
]
```

## ğŸ”— å…³è”ç­–ç•¥

### æ–¹æ³•1: æ•°ç»„ç´¢å¼•é…å¯¹ (æ¨è)
```sql
-- é€šè¿‡æ•°ç»„ç´¢å¼•ç›´æ¥é…å¯¹
SELECT 
    json_extract(prompts.value, '$[' || idx || '].text') as question,
    json_extract(generations.value, '$[' || idx || '].textDescription') as answer
FROM ItemTable prompts, ItemTable generations
WHERE prompts.key = 'aiService.prompts' 
  AND generations.key = 'aiService.generations';
```

### æ–¹æ³•2: æ—¶é—´æˆ³å…³è”
```sql
-- é€šè¿‡æ—¶é—´æˆ³åŒ¹é…æœ€è¿‘çš„é—®ç­”å¯¹
-- (é€‚ç”¨äºå¤æ‚çš„å…³è”åœºæ™¯)
```

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡

ä»æˆ‘ä»¬çš„åˆ†æä¸­å‘ç°ï¼š
- **æ€»é—®é¢˜æ•°**: 127
- **æ€»å›ç­”æ•°**: 100  
- **é…å¯¹å®Œæ•´åº¦**: ~79% (127ä¸ªé—®é¢˜ä¸­æœ‰100ä¸ªå¾—åˆ°å›ç­”)

## ğŸ› ï¸ å®ç”¨å·¥å…·

### 1. å¿«é€Ÿæ‰«æå·¥å…·
```bash
./scan-cursor-data.sh
```
- æ‰«æCursorç›®å½•ç»“æ„
- æ‰¾åˆ°æ‰€æœ‰SQLiteæ•°æ®åº“
- è¯†åˆ«åŒ…å«èŠå¤©æ•°æ®çš„æ•°æ®åº“

### 2. é—®ç­”å…³è”æŸ¥è¯¢
```bash
sqlite3 "æ•°æ®åº“è·¯å¾„" < correlate-qa-pairs.sql
```
- å®Œæ•´çš„é—®ç­”é…å¯¹æŸ¥è¯¢
- æ”¯æŒå†…å®¹æœç´¢å’Œæ—¶é—´çº¿åˆ†æ
- å¯¼å‡ºå‹å¥½çš„æ ¼å¼

### 3. ç®€åŒ–æµ‹è¯•æŸ¥è¯¢
```bash
sqlite3 "æ•°æ®åº“è·¯å¾„" < test-qa-correlation.sql
```
- å¿«é€ŸéªŒè¯é…å¯¹æ•ˆæœ
- åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯
- é¡¹ç›®ç›¸å…³å†…å®¹æœç´¢

### 4. èŠå¤©æ•°æ®æå–å™¨
```bash
./extract-cursor-chats.sh
```
- è‡ªåŠ¨æ‰¾åˆ°èŠå¤©æ•°æ®åº“
- ç»¼åˆåˆ†ææŠ¥å‘Š
- ä¸€é”®è·å–æ‰€æœ‰ä¿¡æ¯

## ğŸ¯ æ ¸å¿ƒSQLæŸ¥è¯¢ç¤ºä¾‹

### è·å–æœ€è¿‘5å¯¹é—®ç­”
```sql
WITH prompts AS (
    SELECT value as json_data FROM ItemTable WHERE key = 'aiService.prompts'
),
generations AS (
    SELECT value as json_data FROM ItemTable WHERE key = 'aiService.generations'
),
indices AS (SELECT 0 as i UNION SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4)
SELECT 
    (i + 1) as pair_id,
    json_extract(p.json_data, '$[' || i || '].text') as question,
    json_extract(g.json_data, '$[' || i || '].textDescription') as answer,
    datetime(json_extract(g.json_data, '$[' || i || '].unixMs') / 1000, 'unixepoch') as chat_time
FROM indices
CROSS JOIN prompts p
CROSS JOIN generations g
WHERE json_extract(p.json_data, '$[' || i || '].text') IS NOT NULL
ORDER BY i;
```

### æœç´¢é¡¹ç›®ç›¸å…³å¯¹è¯
```sql
-- åœ¨é—®é¢˜æˆ–ç­”æ¡ˆä¸­æœç´¢ç‰¹å®šå…³é”®è¯
WHERE question LIKE '%cursor-chat-memory%'
   OR answer LIKE '%cursor-chat-memory%'
   OR question LIKE '%SQLite%'
   OR answer LIKE '%æ’ä»¶%'
```

## ğŸ’¡ å…³é”®æ´å¯Ÿ

### 1. **å®Œç¾çš„æ—¶åºå…³ç³»**
- é—®é¢˜å’Œç­”æ¡ˆçš„æ•°ç»„ç´¢å¼•å¤©ç„¶å¯¹åº”
- æ—¶é—´æˆ³æä¾›é¢å¤–çš„éªŒè¯æœºåˆ¶
- ä¸éœ€è¦å¤æ‚çš„åŒ¹é…ç®—æ³•

### 2. **æ•°æ®å®Œæ•´æ€§**
- å¤§éƒ¨åˆ†é—®é¢˜éƒ½æœ‰å¯¹åº”çš„ç­”æ¡ˆ
- å°‘æ•°æœªé…å¯¹å¯èƒ½æ˜¯ç³»ç»Ÿæ“ä½œæˆ–ä¸­æ–­çš„å¯¹è¯
- é€šè¿‡UUIDå¯ä»¥è¿½è¸ªæ¯ä¸ªAIç”Ÿæˆçš„å†…å®¹

### 3. **æ‰©å±•æ€§**
- å¯ä»¥è½»æ¾é€‚é…æ–°çš„èŠå¤©ä¼šè¯
- æ”¯æŒå¤šé¡¹ç›®çš„èŠå¤©æ•°æ®åˆ†æ
- ä¸ºè‡ªåŠ¨åŒ–å·¥å…·æä¾›äº†åŸºç¡€

## ğŸ”„ å®æ—¶ç›‘æ§ (å¾…å®ç°)

å½“å®‰è£…äº†`fswatch`åï¼Œå¯ä»¥ä½¿ç”¨ï¼š
```bash
./monitor-cursor-changes.sh
```
å®æ—¶è§‚å¯ŸèŠå¤©æ•°æ®çš„å˜åŒ–ï¼Œæ‰¾åˆ°æ›´è¯¦ç»†çš„æ•°æ®æµç¨‹ã€‚

## ğŸ‰ æ€»ç»“

**é—®é¢˜å·²å®Œå…¨è§£å†³ï¼** æˆ‘ä»¬ç°åœ¨å¯ä»¥ï¼š

1. âœ… **ç²¾ç¡®é…å¯¹**ï¼šé€šè¿‡æ•°ç»„ç´¢å¼•å‡†ç¡®åŒ¹é…æ¯ä¸ªé—®é¢˜å’Œç­”æ¡ˆ
2. âœ… **æ—¶é—´è¿½è¸ª**ï¼šåˆ©ç”¨æ—¶é—´æˆ³äº†è§£å¯¹è¯çš„æ—¶åºå…³ç³»  
3. âœ… **å†…å®¹æœç´¢**ï¼šå¿«é€Ÿæ‰¾åˆ°ç‰¹å®šä¸»é¢˜çš„å¯¹è¯
4. âœ… **æ•°æ®å¯¼å‡º**ï¼šä»¥ç»“æ„åŒ–æ ¼å¼å¯¼å‡ºé—®ç­”å¯¹
5. âœ… **è‡ªåŠ¨åŒ–**ï¼šé€šè¿‡è„šæœ¬å®ç°æ‰¹é‡å¤„ç†

è¿™å¥—æ–¹æ¡ˆä¸ä»…è§£å†³äº†åŸå§‹é—®é¢˜ï¼Œè¿˜ä¸ºåç»­çš„èŠå¤©æ•°æ®åˆ†æå’Œåˆ©ç”¨å¥ å®šäº†åšå®åŸºç¡€ï¼ 